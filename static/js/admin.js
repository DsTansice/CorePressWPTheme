null!=set.code.headcode&&(set.code.headcode=BASE64.decode(set.code.headcode));null!=set.code.footcode&&(set.code.footcode=BASE64.decode(set.code.footcode));null!=set.code.css&&(set.code.css=BASE64.decode(set.code.css));null!=set.post.copyright&&(set.post.copyright=BASE64.decode(set.post.copyright));var vue=new Vue({el:"#app",data:{menu_active:2,adminurl:adminurl,set:set,dialog:{colorPick:!1}},methods:{mailtest:function(a){$(a.target).text("\u53d1\u9001\u4e2d");$.post(vue.adminurl,{action:"corepress_mailtest",user:vue.set.module.smtpuser,pwd:vue.set.module.smtppwd,name:vue.set.module.smtpname,port:vue.set.module.smtpport,host:vue.set.module.smtphost,type:vue.set.module.smtpencrypttype,testmail:vue.set.module.testmail},function(c){$(a.target).text("\u53d1\u4fe1\u6d4b\u8bd5");(c=JSON.parse(c))?200==c.code?vue.$message({message:c.msg,type:"success",offset:50}):vue.$message({message:c.msg,type:"warning",offset:50}):vue.$message({message:"\u672a\u77e5\u9519\u8bef",type:"error",offset:50})})},selectMenu:function(a,c){vue.menu_active=a},reThemeColor:function(a){0==a?vue.set.theme.themeColor="#409EFF":1==a?vue.set.theme.fontSelectedColor="#3390ff":2==a&&(vue.set.theme.themeHoverColor="#409EFF")},selectImg:function(a,c){var b;b=wp.media({title:"\u9009\u62e9\u56fe\u7247",button:{text:"\u63d2\u5165"},multiple:!1});b.on("select",function(){attachment=b.state().get("selection").first().toJSON();"set.routine.logo"===a?vue.set.routine.logo=attachment.url:"set.routine.defaultthumbnail"===a?vue.set.routine.defaultthumbnail=attachment.url:"set.routine.favicon"===a?vue.set.routine.favicon=attachment.url:"swiperlist"===a?vue.set.index.swiperlist[c].imgurl=attachment.url:"set.user.lgoinpageimg"===a?vue.set.user.lgoinpageimg=attachment.url:"set.user.regpageimg"===a?vue.set.user.regpageimg=attachment.url:"reward1"===a?vue.set.post.reward1=attachment.url:"reward2"===a?vue.set.post.reward2=attachment.url:"set.theme.bagimg"===a?vue.set.theme.bagimg=attachment.url:"postcard"===a?vue.set.index.postcard[c].imgurl=attachment.url:"set.user.repasswordimg"===a&&(vue.set.user.repasswordimg=attachment.url)});b.open()},delSwiper:function(a){vue.$confirm("\u6b64\u64cd\u4f5c\u5c06\u5220\u9664\u5f53\u524d\u5e7b\u706f\u7247\u9879\u76ee\uff0c\u662f\u5426\u786e\u5b9a\uff1f","\u63d0\u793a",{confirmButtonText:"\u786e\u5b9a",cancelButtonText:"\u53d6\u6d88",type:"warning"}).then(function(){vue.set.index.swiperlist.splice(a,1)})["catch"](function(){})},addSwiper:function(){vue.set.index.swiperlist.push({title:"",url:"",imgurl:""})},moveSwiper:function(a,c){console.log(a,c);var b=vue.set.index.swiperlist;b[a]=b.splice(a+c,1,b[a])[0]},addPostCard:function(){vue.set.index.postcard.push({title:"",url:"",imgurl:""})},delPostCard:function(a){vue.$confirm("\u6b64\u64cd\u4f5c\u5c06\u5220\u9664\u5f53\u524d\u5361\u7247\u9879\u76ee\uff0c\u662f\u5426\u786e\u5b9a\uff1f","\u63d0\u793a",{confirmButtonText:"\u786e\u5b9a",cancelButtonText:"\u53d6\u6d88",type:"warning"}).then(function(){vue.set.index.postcard.splice(a,1)})["catch"](function(){})},movePostCard:function(a,c){var b=vue.set.index.postcard;b[a]=b.splice(a+c,1,b[a])[0]},save:function(){var a=!1,c=!1;vue.set.index.swiperlist.forEach(function(b,c,d){""==b.imgurl&&(a=!0)});vue.set.index.postcard.forEach(function(a,b,d){""==a.imgurl&&(c=!0)});if(1==c)vue.$message({message:"\u5361\u7247\u56fe\u50cf\u5730\u5740\u4e3a\u7a7a\uff0c\u8bf7\u586b\u5199\uff01",type:"warning",offset:50});else if(1==a)vue.$message({message:"\u5e7b\u706f\u7247\u56fe\u50cf\u5730\u5740\u4e3a\u7a7a\uff0c\u8bf7\u586b\u5199\uff01",type:"warning",offset:50});else if(0==vue.set.user.loginpage||""!==vue.set.user.lgoinpageurl&&null!==vue.set.user.lgoinpageurl){var b=JSON.parse(JSON.stringify(vue.set));console.log(b);null!=b.code.headcode&&(b.code.headcode=BASE64.encode(b.code.headcode));null!=b.code.footcode&&(b.code.footcode=BASE64.encode(b.code.footcode));null!=b.code.css&&(b.code.css=BASE64.encode(b.code.css));null!=b.post.copyright&&(b.post.copyright=BASE64.encode(b.post.copyright));axios.post(vue.adminurl+"?action\x3dsave",{save:BASE64.encode(JSON.stringify(b))}).then(function(a){1==a.data.code?vue.$message({message:"\u4fdd\u5b58\u6210\u529f\uff01",type:"success",offset:50}):vue.$message({message:"\u4f60\u4ec0\u4e48\u90fd\u8fd8\u6ca1\u4fee\u6539\u5462\uff01",type:"success",offset:50})})}else vue.$message({message:"\u5df2\u5f00\u542f\u81ea\u5b9a\u4e49\u767b\u5f55\u9875\u9762\uff0c\u8bf7\u8bbe\u7f6e\u5730\u5740",type:"warning",offset:50})}}});